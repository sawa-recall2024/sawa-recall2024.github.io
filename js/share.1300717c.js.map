{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/share.vue","webpack:///./src/share.vue?7646","webpack:///./src/share.vue?2df9","webpack:///./src/share.vue?95af","webpack:///./src/logger/index.ts","webpack:///./src/firebase-manager/index.ts","webpack:///./src/local-storage-manager/index.ts","webpack:///./src/local-storage-manager/consts.ts","webpack:///./src/domain-manager/dial.ts","webpack:///./src/init.ts","webpack:///./src/share.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","_setupProxy","attrs","staticRenderFns","Vue","extend","components","App","component","Logger","constructor","enable","setEnable","bl","console","log","trace","warn","error","table","getEnable","instance","message","optionalParams","tabularData","logger","getInstance","FirebaseManager","init","firebaseConfig","process","VUE_APP_FLAVOR","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","analytics","getAnalytics","remoteConfig","getRemoteConfig","perf","getPerformance","firebasePerformanceTrace","reportToFirebase","cData","keys","forEach","time","Timestamp","fromDate","Date","dayjs","getSysTs","valueOf","db","getFirestore","eventRef","doc","collection","setDoc","e","event","logEvent","fetchAndActivate","val","getValue","asString","createLocalStorageManager","reactiveStorageMap","ref","v","localStorage","getItem","String","JSON","parse","decodeURIComponent","atob","set","btoa","encodeURIComponent","stringify","setItem","createSessionStorageManager","sessionStorage","useLocalStorage","LOCAL_STORAGE_KEY","SESSION_STORAGE_KEY","LOG_TAG","async","waitValue","ts","Promise","setTimeout","raceWithTime","promise","race","DialType","getFirebaseConfig","getValueFromConfig","dial_timeout","dailUrls","urls","type","url","API","dialGoPk","then","res","神策","dialSensors","timeout","api","dial","ls","上次使用过的API_BASE","setApiBaseUrl","上次使用过的神策域名","dial2","go_pk","se","all","getConfigAndDial","conf","备用apilist","备用神策list","createRacer","options","defaultOpts","onlyFirst","onlyOnce","opts","assign","err","_promises","_resolvers","Map","firstPromises","onceSuccessId","id","hasUseFirst","hasUseOnce","raceFirst","raceOnce","raceNormal","t_promise","resolve","reject","raceFunc","__promises","map","catch","Array","from","resolver","raceFunc2","raceFunc3","SENSOR_SERVER_URL","initDomainDial","racer","isInit","BASE_PUBLIC_PATH","location","origin","initSensors","initWebSensorsSdk","batch","exec","u","send_type","URL","href","_o","datasend_timeout","send_interval","storage_length","batch_send","app_js_bridge","sdk","initWebSensors","max_string_length","sensors","on","obj","t_firebase","start","putAttribute","stop","handleObj","fail","getDayJs","datas","Number","format","e_us","filter","_i$properties","properties","s_event_uuid","_i$properties2","_datas$properties","setTime","getServTs","appType","sawa","updateTsDelta","getMyInfo","report","reportWebSensors","h5_deviceid","getUUid","config","productionTip","getArgsFromUrlHash","setLang","lang","calculateWindow","ready","DayJs","setOffset","TimeType","Ksa","addWebpAvifSupport","avif","getPlatform","isIPhone","initErrorReporter","nanoid","reportSensors","metric","observeSourceMetric","desc","source_name","h","Main","$mount"],"mappings":"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","file":"js/share.1300717c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"share\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([3,\"chunk-vendors\",\"chunk-common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('App',{attrs:{\"type\":3}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from 'vue'\nimport App from './views/receive/index.vue'\n\nexport default Vue.extend({\n  components: { App },\n})\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--15-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--15-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./share.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--15-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--15-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./share.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./share.vue?vue&type=template&id=843538be\"\nimport script from \"./share.vue?vue&type=script&lang=ts\"\nexport * from \"./share.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\nclass Logger {\n  static instance: Logger\n\n  enable = true\n\n  setEnable(bl: boolean) {\n    this.enable = bl\n    if (this.enable) {\n      console.log = console.log\n      console.trace = console.trace\n      console.warn = console.warn\n      console.error = console.error\n      console.table = console.table\n    } else {\n      console.log = () => {}\n      console.trace = () => {}\n      console.warn = () => {}\n      console.error = () => {}\n      console.table = () => {}\n    }\n  }\n\n  getEnable() {\n    return this.enable\n  }\n\n  static getInstance() {\n    if (!Logger.instance) {\n      Logger.instance = new Logger()\n    }\n    return Logger.instance\n  }\n\n  _log: any\n\n  _trace: any\n\n  _warn: any\n\n  _error: any\n\n  _table: any\n\n  log(message?: any, ...optionalParams: any[]) {\n    console.log(message, ...optionalParams)\n  }\n\n  trace(message?: any, ...optionalParams: any[]) {\n    console.trace(message, ...optionalParams)\n  }\n\n  warn(message?: any, ...optionalParams: any[]) {\n    console.warn(message, ...optionalParams)\n  }\n\n  error(message?: any, ...optionalParams: any[]) {\n    console.error(message, ...optionalParams)\n  }\n\n  table(...tabularData: any[]) {\n    console.table(...tabularData)\n  }\n}\n\nconst logger = Logger.getInstance()\nexport default logger\n","import { FirebaseApp, initializeApp } from 'firebase/app'\nimport { Analytics, getAnalytics, logEvent } from 'firebase/analytics'\nimport { getPerformance, trace } from 'firebase/performance'\nimport {\n  RemoteConfig,\n  Value,\n  getRemoteConfig,\n  getValue,\n  fetchAndActivate,\n} from 'firebase/remote-config'\nimport dayjs from 'dayjs'\nimport { getFirestore, collection, doc, setDoc, Timestamp } from 'firebase/firestore'\nimport { getServTs, getSysTs } from '@badam/common-utils'\n\nclass FirebaseManager {\n  static instance: FirebaseManager\n\n  private app: FirebaseApp | undefined\n\n  private analytics: Analytics | undefined\n\n  private remoteConfig: RemoteConfig | undefined\n\n  static getInstance() {\n    if (!this.instance) {\n      this.instance = new FirebaseManager()\n    }\n    return this.instance\n  }\n\n  init() {\n    if ((process.env as any).VUE_APP_FLAVOR === 'are') {\n      // return\n    }\n    let firebaseConfig\n    if ((process.env as any).VUE_APP_ENV === 'development') {\n      firebaseConfig = {\n        apiKey: 'AIzaSyBlR0QK--SjqMqihBd03ARBzfuZ3x1euzo',\n        authDomain: 'badamoyundixim.firebaseapp.com',\n        databaseURL: 'https://badamoyundixim.firebaseio.com',\n        projectId: 'badamoyundixim',\n        storageBucket: 'badamoyundixim.appspot.com',\n        messagingSenderId: '532022495714',\n        appId: '1:532022495714:web:a92f2dda69b205e99fd1bb',\n        measurementId: 'G-SHYPRRS1YC',\n      }\n    } else {\n      firebaseConfig = {\n        apiKey: 'AIzaSyBlR0QK--SjqMqihBd03ARBzfuZ3x1euzo',\n        authDomain: 'badamoyundixim.firebaseapp.com',\n        databaseURL: 'https://badamoyundixim.firebaseio.com',\n        projectId: 'badamoyundixim',\n        storageBucket: 'badamoyundixim.appspot.com',\n        messagingSenderId: '532022495714',\n        appId: '1:532022495714:web:2a3620b2f1f41d319fd1bb',\n        measurementId: 'G-8L1XP304KR',\n      }\n    }\n    // Initialize Firebase\n    const app = initializeApp(firebaseConfig)\n    this.app = app\n    this.analytics = getAnalytics(app)\n    this.remoteConfig = getRemoteConfig(app)\n    const perf = getPerformance(app)\n    ;(window as any).firebasePerformanceTrace = function t(p: any) {\n      return trace(perf, p)\n    }\n    ;(window as any).reportToFirebase = (name: string, data: any) => {\n      this.reportToFirebase(name, data)\n    }\n  }\n\n  async reportToFirebase(name: string, data: any) {\n    try {\n      const cData: any = {}\n      Object.keys(data).forEach((key) => {\n        cData[key] = data[key] || ''\n      })\n      cData.time = Timestamp.fromDate(new Date(dayjs(getSysTs()).valueOf()))\n      const db = getFirestore(this.app as FirebaseApp)\n      const eventRef = doc(collection(db, name))\n\n      await setDoc(eventRef, cData)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  async reportEvent(event: string, o: any) {\n    if (this.analytics) {\n      console.log('zeze', event, this.analytics)\n      logEvent(this.analytics as Analytics, event, o)\n    }\n  }\n\n  async getValueFromConfig(key: string) {\n    if (this.remoteConfig) {\n      const bl = await fetchAndActivate(this.remoteConfig)\n      //   if (bl) {\n      const val = getValue(this.remoteConfig, key)\n      return val.asString()\n      //   }\n    }\n    return null\n  }\n}\n\nexport default FirebaseManager\n","// import { throwError } from '../error-manager'\nimport { ref } from 'vue'\nimport {\n  LOCAL_STORAGE_KEY,\n  LOCAL_STORAGE_MAP,\n  SESSION_STORAGE_KEY,\n  SESSION_STORAGE_MAP,\n} from './consts'\n\nfunction createLocalStorageManager() {\n  const reactiveStorageMap = ref({} as LOCAL_STORAGE_MAP)\n\n  function get<T extends keyof LOCAL_STORAGE_MAP>(key: T): LOCAL_STORAGE_MAP[T] | null {\n    let value = reactiveStorageMap.value[key]\n    if (!value) {\n      const v = localStorage.getItem(String(key))\n      try {\n        if (v) {\n          value = JSON.parse(decodeURIComponent(atob(v)))\n          reactiveStorageMap.value[key] = value\n          return value\n        }\n      } catch (e) {\n        // throwError({ err: '解key失败', data: key })\n      }\n      return null\n    }\n    return value\n  }\n\n  function set<T extends keyof LOCAL_STORAGE_MAP>(key: T, value: LOCAL_STORAGE_MAP[T]) {\n    try {\n      const v = btoa(encodeURIComponent(JSON.stringify(value)))\n      localStorage.setItem(String(key), v)\n      reactiveStorageMap.value[key] = value\n    } catch (e) {\n      // throwError({ err: 'set key-value失败', data: { key, value } })\n    }\n  }\n  return function manager() {\n    return {\n      get,\n      set,\n    }\n  }\n}\n\nfunction createSessionStorageManager() {\n  const reactiveStorageMap = ref({} as LOCAL_STORAGE_MAP)\n\n  function get<T extends keyof LOCAL_STORAGE_MAP>(key: T): LOCAL_STORAGE_MAP[T] | null {\n    let value = reactiveStorageMap.value[key]\n    if (!value) {\n      const v = sessionStorage.getItem(String(key))\n      try {\n        if (v) {\n          value = JSON.parse(decodeURIComponent(atob(v)))\n          reactiveStorageMap.value[key] = value\n          return value\n        }\n      } catch (e) {\n        // throwError({ err: '解key失败', data: key })\n      }\n      return null\n    }\n    return value\n  }\n\n  function set<T extends keyof LOCAL_STORAGE_MAP>(key: T, value: LOCAL_STORAGE_MAP[T]) {\n    try {\n      const v = btoa(encodeURIComponent(JSON.stringify(value)))\n      sessionStorage.setItem(String(key), v)\n      reactiveStorageMap.value[key] = value\n    } catch (e) {\n      // throwError({ err: 'set key-value失败', data: { key, value } })\n    }\n  }\n  return function manager() {\n    return {\n      get,\n      set,\n    }\n  }\n}\n\nexport const useLocalStorage = createLocalStorageManager()\n\nexport const useSessionStorage = createSessionStorageManager()\n","/*  eslint-disable */\nconst STORAGE_KEY_PREFIX = 'sawa_ow_'\n\nexport enum LOCAL_STORAGE_KEY {\n  上次的充值金额 = 'last_pay_amount',\n  上次的支付子方式 = 'last_pay_type_2',\n  上次成功支付子方式 = 'last_success_pay_type_2',\n  上次的支付订单 = 'last_pay_order_id',\n  本地Skey = `sawa_ow_skey`,\n  上次的支付卡 = `sawa_ow_pay_card`,\n  上次成功的支付卡 = `sawa_ow_success_pay_card`,\n  充值对象uid = `sawa_ow_to_uid`,\n  历史充值对象列表 = `sawa_ow_recharge_user_history_list`,\n  本地登录用户 = `sawa_ow_login_user`,\n  充值对象 = `sawa_ow_to_user`,\n  显示模拟支付的PageVid = `mock_detected_by_pageVid`,\n  上次使用过的API_BASE = `sawa_ow_last_use_api_base`,\n  上次使用过的神策域名 = `sawa_ow_last_use_sensors_base`,\n  备用apilist = `sawa_ow_backup_api_list`,\n  备用神策list = `sawa_ow_backup_sensors_list`,\n  // 登录类型 = `sawa_ow_login_type`,\n\n  // 迁移旧代码登录相关\n  NANO_ID_KEY = 'isawa_official_website_nanoid_3',\n  LOGIN_TICKET_KEY = 'isawa_website_login_ticket_2',\n  LOGIN_TYPE_KEY = 'isawa_website_login_type_2',\n  whiteListKey = 'cko_new_white_list_key', //cko 白名单 待删\n}\n\nexport type LOCAL_STORAGE_MAP = {\n  [LOCAL_STORAGE_KEY.上次的充值金额]: number\n  [LOCAL_STORAGE_KEY.上次的支付订单]: string\n  [LOCAL_STORAGE_KEY.本地Skey]: string\n  // [LOCAL_STORAGE_KEY.充值对象uid]: number\n  // [LOCAL_STORAGE_KEY.充值对象]: UserInfo\n  [LOCAL_STORAGE_KEY.显示模拟支付的PageVid]: string\n  [LOCAL_STORAGE_KEY.上次使用过的API_BASE]: string\n  [LOCAL_STORAGE_KEY.上次使用过的神策域名]: string\n  // [LOCAL_STORAGE_KEY.备用apilist]: string[]\n  // [LOCAL_STORAGE_KEY.备用神策list]: string[]\n  // [LOCAL_STORAGE_KEY.登录类型]: string\n\n  // 迁移旧代码登录相关\n  [LOCAL_STORAGE_KEY.NANO_ID_KEY]: number | undefined\n  [LOCAL_STORAGE_KEY.LOGIN_TICKET_KEY]: string | undefined\n  [LOCAL_STORAGE_KEY.whiteListKey]: string\n}\n\nexport enum SESSION_STORAGE_KEY {\n  // PVI刷新时间 = `sawa_ow_pvi_refresh_time`,\n}\n\nexport type SESSION_STORAGE_MAP = {\n  // [SESSION_STORAGE_KEY.PVI刷新时间]: string\n}\n","/* eslint-disable */\nimport { setApiBaseUrl } from '@/api'\nimport { handleApiResult, api } from '@badam/common-utils'\nimport FirebaseManager from '../firebase-manager'\nimport { useLocalStorage } from '../local-storage-manager'\nimport { LOCAL_STORAGE_KEY } from '../local-storage-manager/consts'\n// import reporter from '../report-manager'\n// import { EventName } from '../report-manager/events'\n\nconst LOG_TAG = 'domain-dial'\n\nexport async function waitValue<T>(ts: number, value: T): Promise<T> {\n  return new Promise((r) => {\n    setTimeout(() => {\n      r(value)\n    }, ts)\n  })\n}\n\nexport async function raceWithTime<T>(promise: Promise<T>, time = 5000) {\n  return Promise.race([waitValue(time, null), promise])\n}\n\nexport enum DialType {\n  神策 = 1,\n  API = 2,\n}\n\nexport async function getFirebaseConfig(): Promise<string | null> {\n  return raceWithTime(FirebaseManager.getInstance().getValueFromConfig('ow_conf'))\n}\n\n// export async function getBackupDomains() {\n//   const res = await backupDomains()\n//   if (res[0]) {\n//     const [, { data }] = res\n//     const d = JSON.parse(data as any)\n//     console.log(LOG_TAG, 'data', d)\n//   }\n// }\n\nconst dial_timeout = 5000\n\nexport async function dailUrls(urls: string[], type: DialType): Promise<string> {\n  const promise: Promise<string> = new Promise((r) => {\n    for (let i = 0; i < urls.length; i += 1) {\n      const url = urls[i]\n      if (type === DialType.API) {\n        dialGoPk(url).then((res) => {\n          if (res) {\n            r(url)\n          }\n        })\n      } else if (type === DialType.神策) {\n        dialSensors(url).then((res) => {\n          if (res) {\n            r(url)\n          }\n        })\n      }\n    }\n  })\n  const timeout: Promise<string> = new Promise((r) =>\n    setTimeout(() => {\n      r('')\n    }, dial_timeout)\n  )\n  return Promise.race([promise, timeout])\n}\n\nexport async function dialGoPk(url: string): Promise<string> {\n  const res = await api.get(`https://${url}/api/sys/h5_info`, {})\n  return res[0] ? url : ''\n}\n\nexport async function dialSensors(url: string): Promise<string> {\n  const res = await api.get(`https://${url}/api/gm/hii`, {})\n  return res[0] ? url : ''\n}\n\nexport async function dial(urls: string[], type: DialType) {\n  const ls = useLocalStorage()\n  if (type === DialType.API) {\n    const res = await dailUrls(urls, DialType.API)\n    if (res) {\n      ls.set(LOCAL_STORAGE_KEY.上次使用过的API_BASE, res)\n      setApiBaseUrl(`https://${res}/`)\n    } else {\n      console.error('dial api timeout')\n      // reporter.report(\n      //   EventName.h5_init_error,\n      //   { error: 'dial api timeout' },\n      //   { onlyFirebase: true }\n      // )\n    }\n  } else if (type === DialType.神策) {\n    const res = await dailUrls(urls, DialType.神策)\n    if (res) {\n      console.log('神策res', res, LOCAL_STORAGE_KEY.上次使用过的神策域名)\n      ls.set(LOCAL_STORAGE_KEY.上次使用过的神策域名, res)\n    } else {\n      console.error('dial api timeout')\n      // reporter.report(\n      //   EventName.h5_init_error,\n      //   { error: 'dial sensors timeout' },\n      //   { onlyFirebase: true }\n      // )\n    }\n  }\n}\n\nexport function dial2(go_pk: string[] | null, se: string[] | null) {\n  const ls = []\n  if (go_pk) {\n    ls.push(dial(go_pk, DialType.API))\n  }\n  if (se) {\n    ls.push(dial(se, DialType.神策))\n  }\n  return Promise.all(ls)\n}\n\nexport async function getConfigAndDial(): Promise<boolean> {\n  const ls: any = useLocalStorage()\n  FirebaseManager.getInstance().init()\n  const conf = await getFirebaseConfig()\n\n  console.log('conf', conf)\n\n  if (conf) {\n    const o = JSON.parse(conf)\n    const go_pk: string[] = o.go_pk\n    const se: string[] = o.se\n    console.log(LOG_TAG, 'conf', go_pk, se)\n    ls.set(LOCAL_STORAGE_KEY.备用apilist, go_pk)\n    ls.set(LOCAL_STORAGE_KEY.备用神策list, se)\n    await dial2(go_pk, se)\n    return true\n  } else {\n    const go_pk = ls.get(LOCAL_STORAGE_KEY.备用apilist)\n    const se = ls.get(LOCAL_STORAGE_KEY.备用神策list)\n    await dial2(go_pk, se)\n    return true\n  }\n}\n","/* eslint-disable */\nimport { ref } from 'vue'\nimport logger from './logger'\nimport { getArgsFromUrl, initWebSensors, getDayJs, getSysTs } from '@badam/common-utils'\nimport { getConfigAndDial } from './domain-manager/dial'\nimport { useLocalStorage } from './local-storage-manager'\n\ntype RacerOptions = {\n  onlyFirst?: boolean // 是否只执行第一个，后续的返回第一个的执行结果\n  onlyOnce?: boolean // 是否竞态一次后，后续的不再执行并且抛错\n}\n\nexport function createRacer<T>(options?: RacerOptions) {\n  type Res = T\n  type Resolver = (value: Res | PromiseLike<Res>) => void\n  type Rejecter = (reason?: string) => void\n  type PromiseFunc = (...args: any) => Promise<Res>\n\n  const defaultOpts: RacerOptions = {\n    onlyFirst: false,\n    onlyOnce: false,\n  }\n\n  const opts = Object.assign({}, defaultOpts, options || {})\n\n  if (opts.onlyFirst && opts.onlyOnce) {\n    console.error({ err: 'utils:onlyFirst和onlyOnce不能同时为true' })\n    // throwError({ err: 'utils:onlyFirst和onlyOnce不能同时为true' })\n  }\n\n  const _promises: PromiseFunc[] = []\n  const _resolvers: Map<\n    number,\n    {\n      resolve: Resolver\n      reject: Rejecter\n    }\n  > = new Map()\n\n  let id = 0\n\n  let hasUseFirst = false\n  let hasUseOnce = false\n\n  let firstPromises: Promise<Res>\n  let onceSuccessId: number\n\n  return {\n    async race(promise: PromiseFunc[]): Promise<Res> {\n      if (opts.onlyFirst) {\n        return this.raceFirst(promise)\n      }\n      if (opts.onlyOnce) {\n        return this.raceOnce(promise)\n      }\n      return this.raceNormal(promise)\n    },\n\n    async raceNormal(promise: PromiseFunc[]): Promise<Res> {\n      _promises.push(...promise)\n      const t_promise = new Promise<Res>((resolve, reject) => {\n        id += 1\n        _resolvers.set(id, { resolve, reject })\n        this.raceFunc(id)\n      })\n      return t_promise\n    },\n\n    async raceFunc(id: number) {\n      const __promises = _promises.map((p) => p())\n      const res = await Promise.race(__promises).catch((e) => console.error(e))\n      if (typeof res !== 'undefined') {\n        _promises.splice(0, _promises.length)\n        const keys = Array.from(_resolvers.keys())\n        keys.forEach((key) => {\n          const resolver = _resolvers.get(key)\n          if (resolver) {\n            if (key === id) {\n              resolver.resolve(res)\n            } else {\n              resolver.reject(`utils:racer竞争失败, success id: ${id}, fail id: ${key}`)\n            }\n          }\n        })\n      }\n    },\n\n    async raceFirst(promise: PromiseFunc[]): Promise<Res> {\n      if (!hasUseFirst) {\n        _promises.push(...promise)\n        const t_promise = new Promise<Res>((resolve, reject) => {\n          id += 1\n\n          _resolvers.set(id, { resolve, reject })\n          this.raceFunc2(id)\n        })\n        firstPromises = t_promise\n        hasUseFirst = true\n        return t_promise\n      } else {\n        return firstPromises\n      }\n    },\n\n    async raceFunc2(id: number) {\n      const __promises = _promises.map((p) => p())\n      const res = await Promise.race(__promises).catch((e) => console.error(e))\n      // console.warn('h5_pay_page_show', 999, res)\n      if (typeof res !== 'undefined') {\n        _promises.splice(0, _promises.length)\n        const keys = Array.from(_resolvers.keys())\n        keys.forEach((key) => {\n          const resolver = _resolvers.get(key)\n          if (resolver) {\n            if (key === id) {\n              // console.warn('h5_pay_page_show', 777)\n              resolver.resolve(res)\n            } else {\n              console.warn('h5_pay_page_show', 888)\n              resolver.reject(`utils:racer竞争失败, success id: ${id}, fail id: ${key}`)\n            }\n          }\n        })\n      } else {\n        _promises.splice(0, _promises.length)\n        // 报错重置为false\n        hasUseFirst = false\n      }\n    },\n\n    async raceOnce(promise: PromiseFunc[]): Promise<Res> {\n      _promises.push(...promise)\n      const t_promise = new Promise<Res>((resolve, reject) => {\n        id += 1\n        _resolvers.set(id, { resolve, reject })\n        this.raceFunc3(id)\n      })\n      return t_promise\n    },\n\n    async raceFunc3(id: number) {\n      const __promises = _promises.map((p) => p())\n      const res = await Promise.race(__promises).catch((e) => console.error(e))\n      if (typeof res !== 'undefined') {\n        _promises.splice(0, _promises.length)\n        if (!hasUseOnce) {\n          hasUseOnce = true\n          const keys = Array.from(_resolvers.keys())\n          keys.forEach((key) => {\n            const resolver = _resolvers.get(key)\n            if (resolver) {\n              if (key === id) {\n                onceSuccessId = id\n                resolver.resolve(res)\n              } else {\n                resolver.reject(`utils:racer once竞争失败, success id: ${id}, fail id: ${key}`)\n              }\n            }\n          })\n        } else {\n          const keys = Array.from(_resolvers.keys())\n          keys.forEach((key) => {\n            const resolver = _resolvers.get(key)\n            if (resolver) {\n              resolver.reject(\n                `utils:racer 已经有成功过的了, success id: ${onceSuccessId}, fail id: ${key}`\n              )\n            }\n          })\n        }\n      }\n    },\n  }\n}\n\nexport const SENSOR_SERVER_URL = ref('https://sawa-sa-proxy.badambiz.com:10443/sa')\n\nfunction initDomainDial() {\n  const racer = createRacer<boolean>({ onlyFirst: true })\n\n  async function init(): Promise<boolean> {\n    const r = await getConfigAndDial()\n    o.isInit = r\n    return r\n  }\n  const o = {\n    isInit: false,\n    async exec() {\n      return racer.race([init])\n    },\n  }\n  return o\n}\n\nconst STORAGE_KEY_PREFIX = 'sawa_ow_'\n\n// @ts-ignore\nexport enum LOCAL_STORAGE_KEY {\n  // @ts-ignore\n  上次的充值金额 = 'last_pay_amount',\n  // @ts-ignore\n  上次的支付子方式 = 'last_pay_type_2',\n  上次成功支付子方式 = 'last_success_pay_type_2',\n  上次的支付订单 = 'last_pay_order_id',\n  // @ts-ignore\n  本地Skey = `${STORAGE_KEY_PREFIX}skey`,\n  // @ts-ignore\n  上次的支付卡 = `${STORAGE_KEY_PREFIX}pay_card`,\n  // @ts-ignore\n  上次成功的支付卡 = `${STORAGE_KEY_PREFIX}success_pay_card`,\n  // @ts-ignore\n  充值对象uid = `${STORAGE_KEY_PREFIX}to_uid`,\n  // @ts-ignore\n  历史充值对象列表 = `${STORAGE_KEY_PREFIX}recharge_user_history_list`,\n  // @ts-ignore\n  本地登录用户 = `${STORAGE_KEY_PREFIX}login_user`,\n  // @ts-ignore\n  充值对象 = `${STORAGE_KEY_PREFIX}to_user`,\n  // @ts-ignore\n  显示模拟支付的PageVid = `mock_detected_by_pageVid`,\n  // @ts-ignore\n  上次使用过的API_BASE = `${STORAGE_KEY_PREFIX}last_use_api_base`,\n  // @ts-ignore\n  上次使用过的神策域名 = `${STORAGE_KEY_PREFIX}last_use_sensors_base`,\n  // @ts-ignore\n  备用apilist = `${STORAGE_KEY_PREFIX}backup_api_list`,\n  // @ts-ignore\n  备用神策list = `${STORAGE_KEY_PREFIX}backup_sensors_list`,\n  // @ts-ignore\n  登录类型 = `${STORAGE_KEY_PREFIX}login_type`,\n\n  // 迁移旧代码登录相关\n  NANO_ID_KEY = 'isawa_official_website_nanoid_3',\n  LOGIN_TICKET_KEY = 'isawa_website_login_ticket_2',\n  LOGIN_TYPE_KEY = 'isawa_website_login_type_2',\n  whiteListKey = 'cko_new_white_list_key', //cko 白名单 待删\n}\n\ndeclare enum SensorSDKName {\n  TEST = '',\n  KSA = 'sawa_saudi',\n  ARE = 'sawa_prod',\n  LIVE = 'xj_live_prod',\n  QAZ = 'QazLive',\n  SAHNA = 'sahna',\n}\n\nexport const BASE_PUBLIC_PATH =\n  process.env.VUE_APP_ENV === 'development' && process.env.VUE_APP_FLAVOR === 'ksa'\n    ? 'https://test-isawa.badambiz.com/html/sawa-offical-website/ksa/'\n    : location.origin + '/'\n\nexport async function initSensors() {\n  const racer = createRacer<boolean>({ onlyFirst: true })\n\n  async function initWebSensorsSdk(batch = false): Promise<boolean> {\n    console.log('zeze')\n    await initDomainDial().exec()\n    const ls: any = useLocalStorage()\n    const u = ls.get('sawa_ow_last_use_sensors_base')\n    if (u) SENSOR_SERVER_URL.value = `https://${u}/sa`\n    const send_type = 'ajax'\n    const log = logger.getEnable()\n    const url = new URL('./sensorsdata.min.js', BASE_PUBLIC_PATH).href\n    console.log('initWebSensorsSdk', SENSOR_SERVER_URL.value, url, process.env)\n\n    const _o = {\n      datasend_timeout: 6000, // 一次请求超过多少毫秒的话自动取消，防止请求无响应。\n      send_interval: 2000, // 间隔多少毫秒发一次数据。\n      storage_length: 200, // 存储 localStorage 条数最大值，默认：200 。\n    }\n    const batch_send = batch ? _o : false\n    const app_js_bridge = false\n\n    let sdk: any = 'sawa_saudi'\n\n    await initWebSensors(sdk, log, send_type, SENSOR_SERVER_URL.value, url, {\n      app_js_bridge,\n      batch_send,\n      max_string_length: 1200,\n    })\n\n    o.isInit = true\n\n    if (window.sensors) {\n      window.sensors.on('dataSendSuccess', (obj: any) => {\n        const trace = (window as any).firebasePerformanceTrace\n        if (trace) {\n          const t_firebase = trace('sensors_send_success')\n          t_firebase.start()\n          t_firebase.putAttribute('result', '1')\n          t_firebase.stop()\n        }\n        handleObj(obj)\n      })\n      window.sensors.on('dataSendFail', (obj: any) => {\n        const trace = (window as any).firebasePerformanceTrace\n        if (trace) {\n          const t_firebase = trace('sensors_send_success')\n          t_firebase.start()\n          t_firebase.putAttribute('result', '0')\n          t_firebase.stop()\n        }\n        handleObj(obj, true)\n      })\n      return true\n    } else {\n      return false\n    }\n  }\n\n  function handleObj(obj: any, fail = false) {\n    const ts = getDayJs(getSysTs()).valueOf()\n    const day = Number(getDayJs(ts).format('YYYYMMDD'))\n    const datas: any = obj?.data\n    let e_us = []\n    let d = {}\n    try {\n      e_us = datas\n        .filter((i: any) => !!i?.properties?.s_event_uuid)\n        .map((i: any) => i?.properties?.s_event_uuid)\n    } catch (e) {\n      e_us = [datas?.properties?.s_event_uuid].filter((i) => !!i)\n      d = datas\n    }\n    console.log(fail ? 'data send fail' : 'data send success', obj, e_us)\n    if ((e_us && e_us.length > 0) || fail) {\n    }\n  }\n\n  const o = {\n    isInit: false,\n    async exec() {\n      return racer.race([initWebSensorsSdk])\n    },\n  }\n\n  return initWebSensorsSdk()\n}\n","import Vue from 'vue'\nimport '@badam/vue-tsx-support/enable-check'\nimport '@badam/vue-tsx-support/options/enable-nativeon'\nimport {\n  calculateWindow,\n  exec,\n  ready,\n  addWebpAvifSupport,\n  initErrorReporter,\n  reportSensors,\n  metric,\n  DayJs,\n  TimeType,\n  getPlatform,\n  getArgsFromUrlHash,\n  setLang,\n  getServTs,\n  appType,\n  updateTsDelta,\n  reportWebSensors,\n  api,\n} from '@badam/common-utils'\nimport Main from '@/share.vue'\nimport { getMyInfo } from '@/store/action'\n// import FirebaseManager from '@/firebase-manager/index'\nimport { initSensors } from './init'\nimport { name, nanoid } from '../package.json'\nimport './index.module.scss'\nimport lang from './lang/index.ksa.json'\n\nVue.config.productionTip = false\n\nif (getArgsFromUrlHash('lan') !== 'zh') {\n  setLang(lang)\n} else {\n  setLang({}, '', true)\n}\n\nasync function setTime() {\n  const time = await getServTs(appType.sawa)\n  updateTsDelta(time)\n}\n\nfunction init() {\n  return Promise.all([setTime(), getMyInfo()])\n}\n\nasync function report() {\n  try {\n    await initSensors()\n\n    reportWebSensors('h5_recall202410_share_enter', {\n      h5_deviceid: api.getUUid(),\n    })\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nexec(async () => {\n  calculateWindow(750)\n  try {\n    await ready()\n    await report()\n    init()\n    // FirebaseManager.getInstance().init()\n    // FirebaseManager.getInstance().reportEvent('h5_user_recall', {})\n    // FirebaseManager.getInstance().reportToFirebase('h5_user_recall', { uuid: getUUid() })\n    DayJs.setOffset(TimeType.Ksa)\n    await addWebpAvifSupport({\n      avif: getPlatform().isIPhone,\n    })\n    initErrorReporter(name, nanoid)\n    reportSensors('act_meaningful_content_loaded', true)\n    metric.observeSourceMetric([\n      {\n        desc: 'banner',\n        source_name: 'banner',\n      },\n    ])\n  } catch (err) {\n    console.error(err)\n  }\n\n  new Vue({\n    render: (h) => h(Main),\n  }).$mount('#app')\n})\n"],"sourceRoot":""}